---
no-loc:
- appsettings.json
- ASP.NET Core Identity
- cookie
- Cookie
- Blazor
- Blazor Server
- Blazor WebAssembly
- Identity
- Let's Encrypt
- Razor
- SignalR
ms.openlocfilehash: 5ff4e4368d9e6d7c8525ae4ef0625d176a256a85
ms.sourcegitcommit: a49c47d5a573379effee5c6b6e36f5c302aa756b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/16/2021
ms.locfileid: "100551260"
---
Серверные приложения Blazor находятся в памяти сервера. Это означает, что в одном процессе размещается несколько приложений. Для каждого сеанса приложения Blazor запускает канал с собственной областью контейнера внедрения зависимостей. Это означает, что службы с областью действия являются уникальными для каждого сеанса Blazor.

> [!WARNING]
> Не рекомендуется совместное использование состояния приложениями на одном сервере с помощью отдельных служб, если только вы не принимаете строгие меры предосторожности, поскольку при таком подходе могут возникать уязвимости, например утечка состояния пользователя между каналами.

В приложениях Blazor можно использовать отдельные службы с отслеживанием состояния, если они предназначены специально для этого. Например, можно использовать кэш памяти как отдельный элемент, поскольку ему требуется ключ для доступа к определенной записи. При этом предполагается, что пользователи не контролируют, какие ключи кэша используются.

**Кроме того, в целях безопасности не следует использовать <xref:Microsoft.AspNetCore.Http.IHttpContextAccessor> в приложениях Blazor.** Приложения Blazor запускаются вне контекста конвейера ASP.NET Core. Доступность <xref:Microsoft.AspNetCore.Http.HttpContext> в <xref:Microsoft.AspNetCore.Http.IHttpContextAccessor> не гарантируется. Также не гарантируется, что в этом интерфейсе содержится контекст запуска приложения Blazor.

Рекомендуемый способ передачи состояния запроса в приложение Blazor — через параметры корневого компонента при первоначальной отрисовке приложения:

* Определите класс со всеми данными, которые необходимо передать в приложение Blazor.
* Заполните эти данные со страницы Razor, используя <xref:Microsoft.AspNetCore.Http.HttpContext>, доступный на данный момент.
* Передайте данные в приложение Blazor в качестве параметра в корневой компонент (приложение).
* Определите параметр в корневом компоненте для хранения данных, передаваемых в приложение.
* Используйте данные, относящиеся к пользователю, в приложении или скопируйте эти данные в службу с заданной областью в <xref:Microsoft.AspNetCore.Components.ComponentBase.OnInitializedAsync%2A>, чтобы их можно было использовать в приложении.

Дополнительные сведения и примеры с кодом см. в разделе <xref:blazor/security/server/additional-scenarios#pass-tokens-to-a-blazor-server-app>.

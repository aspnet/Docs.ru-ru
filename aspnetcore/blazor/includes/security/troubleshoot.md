---
no-loc:
- appsettings.json
- ASP.NET Core Identity
- cookie
- Cookie
- Blazor
- Blazor Server
- Blazor WebAssembly
- Identity
- Let's Encrypt
- Razor
- SignalR
ms.openlocfilehash: 4e7c0e9b0a164e0181af5d6baaedf0669c1c06aa
ms.sourcegitcommit: a49c47d5a573379effee5c6b6e36f5c302aa756b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/16/2021
ms.locfileid: "100551585"
---
## <a name="troubleshoot"></a>Диагностика

::: moniker range=">= aspnetcore-5.0"

### <a name="common-errors"></a>Распространенные ошибки

* Неавторизованный клиент для AAD

  > Сведения: Не удалось выполнить авторизацию Microsoft.AspNetCore.Authorization.DefaultAuthorizationService[2]. Не выполнены такие требования: DenyAnonymousAuthorizationRequirement. Требуется пользователь, прошедший проверку подлинности.

  Ошибка обратного вызова входа от AAD:

  * Ошибка `unauthorized_client` (У вызывающей стороны нет прав на запись для ресурса: [subscriptions/])
  * Описание: `AADB2C90058: The provided application is not configured to allow public clients.`

  Чтобы устранить эту ошибку, сделайте следующее:

  1. На портале Azure перейдите к [манифесту приложения](/azure/active-directory/develop/reference-app-manifest).
  1. Задайте для атрибута [ `allowPublicClient` ](/azure/active-directory/develop/reference-app-manifest#allowpublicclient-attribute) значение `null` или `true`.

::: moniker-end

### <a name="cookies-and-site-data"></a>Файлы Cookie и данные сайта

Файлы Cookie и данные сайта могут сохраняться при обновлении приложения и влиять на тестирование и устранение неполадок. При внесении изменений в код приложения, изменений в учетную запись пользователя у поставщика или изменений конфигурации приложения поставщика очистите следующее:

* файлы cookie входа пользователя;
* файлы cookie приложения;
* кэшированные и сохраненные данные сайта.

Один из подходов, позволяющих предотвратить влияние устаревших файлов cookie и данных сайта на тестирование и устранение неполадок, заключается в следующем.

* Настройте браузер
  * Для тестирования используйте браузер, в котором можно настроить удаление всех файлов cookie и данных сайта при каждом закрытии браузера.
  * Убедитесь, что при любых изменениях в приложении, в данных тестового пользователя или в конфигурации поставщика закрытие браузера выполняется вручную или интегрированной средой разработки.
* Используйте настраиваемую команду, чтобы открыть браузер в режиме инкогнито или частном режиме в Visual Studio:
  * Откройте диалоговое окно **Просмотр с помощью**, которое можно выбрать с помощью кнопки **Запустить** в Visual Studio.
  * Нажмите кнопку **Добавить**.
  * Укажите путь к браузеру в поле **Программа**. Следующие пути к исполняемым файлам являются типичными расположениями установки для Windows 10. Если браузер установлен в другом расположении или вы используете операционную систему, отличную от Windows 10, укажите путь к исполняемому файлу браузера.
    * Microsoft Edge: `C:\Program Files (x86)\Microsoft\Edge\Application\msedge.exe`
    * Google Chrome: `C:\Program Files (x86)\Google\Chrome\Application\chrome.exe`
    * Mozilla Firefox: `C:\Program Files\Mozilla Firefox\firefox.exe`
  * В поле **Аргументы** укажите параметр командной строки, используемый браузером для открытия в режиме инкогнито или частном режиме. Для некоторых браузеров требуется URL-адрес приложения.
    * Microsoft Edge: Используйте ключевое слово `-inprivate`.
    * Google Chrome: используйте `--incognito --new-window {URL}`, где заполнитель `{URL}` — это открываемый URL-адрес (например, `https://localhost:5001`).
    * Mozilla Firefox: используйте `-private -url {URL}`, где заполнитель `{URL}` — это открываемый URL-адрес (например, `https://localhost:5001`).
  * Введите имя в поле **Понятное имя**. Например, `Firefox Auth Testing`.
  * Нажмите кнопку **ОК**.
  * Чтобы не выбирать профиль браузера для каждой операции тестирования с помощью приложения, задайте профиль по умолчанию с помощью кнопки **По умолчанию**.
  * Убедитесь, что при любых изменениях в приложении, в данных тестового пользователя или в конфигурации поставщика закрытие браузера выполняется интегрированной средой разработки.

### <a name="run-the-server-app"></a>Запуск серверного приложения

При тестировании и устранении неполадок в размещенном приложении Blazor убедитесь, что вы используете приложение из проекта **`Server`** . Например, в Visual Studio убедитесь, что серверный проект выделен в **обозревателе решений** перед запуском приложения с помощью любого из следующих подходов:

* Нажмите кнопку **Запустить**.
* В меню выберите **Отладка** > **Начать отладку**.
* Нажмите клавишу <kbd>F5</kbd>.

### <a name="inspect-the-content-of-a-json-web-token-jwt"></a>Проверка содержимого JSON Web Token (JWT)

Чтобы декодировать JSON Web Token (JWT), используйте средство [jwt.ms](https://jwt.ms/) (Майкрософт). Значения в пользовательском интерфейсе остаются в браузере.

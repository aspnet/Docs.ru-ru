---
title: Файл web.config
author: rick-anderson
description: Узнайте, что содержит файл web.config и как настроить различные параметры модуля ASP.NET Core.
monikerRange: '>= aspnetcore-5.0'
ms.author: riande
ms.custom: mvc
ms.date: 02/07/2020
no-loc:
- ':::no-loc(appsettings.json):::'
- ':::no-loc(ASP.NET Core Identity):::'
- ':::no-loc(cookie):::'
- ':::no-loc(Cookie):::'
- ':::no-loc(Blazor):::'
- ':::no-loc(Blazor Server):::'
- ':::no-loc(Blazor WebAssembly):::'
- ':::no-loc(Identity):::'
- ":::no-loc(Let's Encrypt):::"
- ':::no-loc(Razor):::'
- ':::no-loc(SignalR):::'
uid: host-and-deploy/iis/web-config
ms.openlocfilehash: edeef31042547db79fcec98f1236787f78e187a5
ms.sourcegitcommit: ca34c1ac578e7d3daa0febf1810ba5fc74f60bbf
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/30/2020
ms.locfileid: "93057288"
---
# <a name="webconfig-file"></a><span data-ttu-id="eb1ac-103">Файл `web.config`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-103">`web.config` file</span></span>

<span data-ttu-id="eb1ac-104">`web.config` — это файл, который считывается службами IIS и [модулем ASP.NET Core](xref:host-and-deploy/aspnet-core-module) для настройки приложения, размещенного в службах IIS.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-104">The `web.config` is a file that is read by IIS and the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) to configure an app hosted with IIS.</span></span>

## <a name="webconfig-file-location"></a><span data-ttu-id="eb1ac-105">Расположение файла `web.config`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-105">`web.config` file location</span></span>

<span data-ttu-id="eb1ac-106">Для корректной настройки [модуля ASP.NET Core](xref:host-and-deploy/aspnet-core-module) необходимо наличие файла `web.config` в [корневой папке содержимого](xref:fundamentals/index#content-root) развертываемого приложения (как правило, это основной путь приложения).</span><span class="sxs-lookup"><span data-stu-id="eb1ac-106">In order to set up the [ASP.NET Core Module](xref:host-and-deploy/aspnet-core-module) correctly, the `web.config` file must be present at the [content root](xref:fundamentals/index#content-root) path (typically the app base path) of the deployed app.</span></span> <span data-ttu-id="eb1ac-107">Это расположение соответствует физическому пути веб-сайта, указанному в службах IIS.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-107">This is the same location as the website physical path provided to IIS.</span></span> <span data-ttu-id="eb1ac-108">Файл `web.config` требуется в корне приложения, чтобы разрешить публикацию нескольких приложений с помощью веб-развертывания.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-108">The `web.config` file is required at the root of the app to enable the publishing of multiple apps using Web Deploy.</span></span>

<span data-ttu-id="eb1ac-109">По физическому пути приложения находятся файлы с конфиденциальной информацией, например, `{ASSEMBLY}.runtimeconfig.json`, `{ASSEMBLY}.xml` (комментарии к XML-документации) и `{ASSEMBLY}.deps.json`, где заполнитель `{ASSEMBLY}` представляет собой имя сборки.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-109">Sensitive files exist on the app's physical path, such as `{ASSEMBLY}.runtimeconfig.json`, `{ASSEMBLY}.xml` (XML Documentation comments), and `{ASSEMBLY}.deps.json`, where the placeholder `{ASSEMBLY}` is the assembly name.</span></span> <span data-ttu-id="eb1ac-110">Когда файл `web.config` присутствует и сайт запускается нормально, службы IIS не обрабатывают запросы к этим файлам.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-110">When the `web.config` file is present and the site starts normally, IIS doesn't serve these sensitive files if they're requested.</span></span> <span data-ttu-id="eb1ac-111">Если файл `web.config` отсутствует, неправильно именован или не может настроить нормальный запуск сайта, службы IIS могут свободно передавать содержимое этих конфиденциальных файлов.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-111">If the `web.config` file is missing, incorrectly named, or unable to configure the site for normal startup, IIS may serve sensitive files publicly.</span></span>

<span data-ttu-id="eb1ac-112">**Файл `web.config` должен постоянно находиться в развертывании, у этого файла должно быть правильное имя, и файл должен быть в состоянии настроить нормальный запуск сайта. Никогда не удаляйте файл `web.config` из развертывания в рабочей среде.**</span><span class="sxs-lookup"><span data-stu-id="eb1ac-112">**The `web.config` file must be present in the deployment at all times, correctly named, and able to configure the site for normal start up. Never remove the `web.config` file from a production deployment.**</span></span>

<span data-ttu-id="eb1ac-113">Если в проекте нет файла `web.config`, он создается с соответствующими аргументами `processPath` и `arguments` для настройки модуля ASP.NET Core и переносится в [опубликованные выходные данные](xref:host-and-deploy/directory-structure).</span><span class="sxs-lookup"><span data-stu-id="eb1ac-113">If a `web.config` file isn't present in the project, the file is created with the correct `processPath` and `arguments` to configure the ASP.NET Core Module and moved to [published output](xref:host-and-deploy/directory-structure).</span></span>

<span data-ttu-id="eb1ac-114">Если в проекте есть файл `web.config`, он преобразуется с соответствующими аргументами `processPath` и `arguments` для настройки модуля ASP.NET Core и переносится в опубликованные выходные данные.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-114">If a `web.config` file is present in the project, the file is transformed with the correct `processPath` and `arguments` to configure the ASP.NET Core Module and moved to published output.</span></span> <span data-ttu-id="eb1ac-115">Преобразование не изменяет параметры конфигурации служб IIS, включенные в файл.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-115">The transformation doesn't modify IIS configuration settings in the file.</span></span>

<span data-ttu-id="eb1ac-116">Файл `web.config` может содержать дополнительные параметры конфигурации IIS, управляющие активными модулями IIS.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-116">The `web.config` file may provide additional IIS configuration settings that control active IIS modules.</span></span> <span data-ttu-id="eb1ac-117">Сведения о модулях IIS, которые могут обрабатывать запросы к приложениям ASP.NET Core, см. в статье [Модули IIS](xref:host-and-deploy/iis/modules).</span><span class="sxs-lookup"><span data-stu-id="eb1ac-117">For information on IIS modules that are capable of processing requests with ASP.NET Core apps, see the [IIS modules](xref:host-and-deploy/iis/modules) topic.</span></span>

<span data-ttu-id="eb1ac-118">Создание, преобразование и публикация файла `web.config` обрабатываются целевым объектом MSBuild (`_TransformWebConfig`) при публикации проекта.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-118">Creating, transforming, and publishing the `web.config` file is handled by an MSBuild target (`_TransformWebConfig`) when the project is published.</span></span> <span data-ttu-id="eb1ac-119">Этот целевой объект присутствует в целевых веб-пакетах SDK (`Microsoft.NET.Sdk.Web`).</span><span class="sxs-lookup"><span data-stu-id="eb1ac-119">This target is present in the Web SDK targets (`Microsoft.NET.Sdk.Web`).</span></span> <span data-ttu-id="eb1ac-120">Пакет SDK задается в начале файла проекта:</span><span class="sxs-lookup"><span data-stu-id="eb1ac-120">The SDK is set at the top of the project file:</span></span>

```xml
<Project Sdk="Microsoft.NET.Sdk.Web">
```

<span data-ttu-id="eb1ac-121">Чтобы веб-пакет SDK не преобразовывал файл `web.config`, используйте свойство `<IsTransformWebConfigDisabled>` в файле проекта:</span><span class="sxs-lookup"><span data-stu-id="eb1ac-121">To prevent the Web SDK from transforming the `web.config` file, use the `<IsTransformWebConfigDisabled>` property in the project file:</span></span>

```xml
<PropertyGroup>
  <IsTransformWebConfigDisabled>true</IsTransformWebConfigDisabled>
</PropertyGroup>
```

<span data-ttu-id="eb1ac-122">Если пакет SDK не преобразует файл, аргументы `processPath` и `arguments` нужно задать вручную.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-122">When disabling the Web SDK from transforming the file, the `processPath` and `arguments` should be manually set by the developer.</span></span> <span data-ttu-id="eb1ac-123">Для получения дополнительной информации см. <xref:host-and-deploy/aspnet-core-module>.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-123">For more information, see <xref:host-and-deploy/aspnet-core-module>.</span></span>

## <a name="configuration-of-aspnet-core-module-with-webconfig"></a><span data-ttu-id="eb1ac-124">Настройка модуля ASP.NET Core с помощью `web.config`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-124">Configuration of ASP.NET Core Module with `web.config`</span></span>

<span data-ttu-id="eb1ac-125">Модуль ASP.NET Core настроен с помощью раздела `aspNetCore` узла `system.webServer` файла `web.config` на веб-сайте.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-125">The ASP.NET Core Module is configured with the `aspNetCore` section of the `system.webServer` node in the site's `web.config` file.</span></span>

<span data-ttu-id="eb1ac-126">Следующий файл `web.config` публикуется для [зависимого от платформы развертывания](/dotnet/articles/core/deploying/#framework-dependent-deployments-fdd) и настраивает модуль ASP.NET Core для обработки запросов к веб-сайту.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-126">The following `web.config` file is published for a [framework-dependent deployment](/dotnet/articles/core/deploying/#framework-dependent-deployments-fdd) and configures the ASP.NET Core Module to handle site requests:</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <location path="." inheritInChildApplications="false">
    <system.webServer>
      <handlers>
        <add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModuleV2" resourceType="Unspecified" />
      </handlers>
      <aspNetCore processPath="dotnet"
                  arguments=".\MyApp.dll"
                  stdoutLogEnabled="false"
                  stdoutLogFile=".\logs\stdout"
                  hostingModel="inprocess" />
    </system.webServer>
  </location>
</configuration>
```

<span data-ttu-id="eb1ac-127">Следующий файл `web.config` опубликован для [автономного развертывания](/dotnet/articles/core/deploying/#self-contained-deployments-scd).</span><span class="sxs-lookup"><span data-stu-id="eb1ac-127">The following `web.config` is published for a [self-contained deployment](/dotnet/articles/core/deploying/#self-contained-deployments-scd):</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <location path="." inheritInChildApplications="false">
    <system.webServer>
      <handlers>
        <add name="aspNetCore" path="*" verb="*" modules="AspNetCoreModuleV2" resourceType="Unspecified" />
      </handlers>
      <aspNetCore processPath=".\MyApp.exe"
                  stdoutLogEnabled="false"
                  stdoutLogFile=".\logs\stdout"
                  hostingModel="inprocess" />
    </system.webServer>
  </location>
</configuration>
```

<span data-ttu-id="eb1ac-128">Значение `false` свойства <xref:System.Configuration.SectionInformation.InheritInChildApplications%2A> указывает, что параметры, заданные в элементе [`<location>`](/iis/manage/managing-your-configuration-settings/understanding-iis-configuration-delegation#the-concept-of-location), не наследуются приложениями, которые находятся во вложенном каталоге приложения.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-128">The <xref:System.Configuration.SectionInformation.InheritInChildApplications%2A> property is set to `false` to indicate that the settings specified within the [`<location>`](/iis/manage/managing-your-configuration-settings/understanding-iis-configuration-delegation#the-concept-of-location) element aren't inherited by apps that reside in a subdirectory of the app.</span></span>

<span data-ttu-id="eb1ac-129">Когда приложение развернуто в [службе приложений Azure](https://azure.microsoft.com/services/app-service/), путь `stdoutLogFile` задан как `\\?\%home%\LogFiles\stdout`.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-129">When an app is deployed to [Azure App Service](https://azure.microsoft.com/services/app-service/), the `stdoutLogFile` path is set to `\\?\%home%\LogFiles\stdout`.</span></span> <span data-ttu-id="eb1ac-130">Путь сохраняет журналы stdout в папке `LogFiles`, расположение которой автоматически создается службой.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-130">The path saves stdout logs to the `LogFiles` folder, which is a location automatically created by the service.</span></span>

<span data-ttu-id="eb1ac-131">Сведения о конфигурации дочерних приложений IIS см. здесь: <xref:host-and-deploy/iis/index#sub-applications>.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-131">For information on IIS sub-application configuration, see <xref:host-and-deploy/iis/index#sub-applications>.</span></span>

### <a name="attributes-of-the-aspnetcore-element"></a><span data-ttu-id="eb1ac-132">Атрибуты элемента `aspNetCore`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-132">Attributes of the `aspNetCore` element</span></span>

| <span data-ttu-id="eb1ac-133">attribute</span><span class="sxs-lookup"><span data-stu-id="eb1ac-133">Attribute</span></span> | <span data-ttu-id="eb1ac-134">Описание</span><span class="sxs-lookup"><span data-stu-id="eb1ac-134">Description</span></span> | <span data-ttu-id="eb1ac-135">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="eb1ac-135">Default</span></span> |
| --------- | ----------- | :-----: |
| `arguments` | <p><span data-ttu-id="eb1ac-136">Необязательный строковый атрибут.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-136">Optional string attribute.</span></span></p><p><span data-ttu-id="eb1ac-137">Аргументы для исполняемого файла, указанного в атрибуте `processPath`.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-137">Arguments to the executable specified in `processPath`.</span></span></p> | |
| `disableStartUpErrorPage` | <p><span data-ttu-id="eb1ac-138">Дополнительный логический атрибут.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-138">Optional Boolean attribute.</span></span></p><p><span data-ttu-id="eb1ac-139">Если значение равно true, страница **502.5 — ошибка процесса** подавляется и страница в файле `web.config` с кодом состояния 502 имеет более высокий приоритет.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-139">If true, the **502.5 - Process Failure** page is suppressed, and the 502 status code page configured in the `web.config` takes precedence.</span></span></p> | `false` |
| `forwardWindowsAuthToken` | <p><span data-ttu-id="eb1ac-140">Дополнительный логический атрибут.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-140">Optional Boolean attribute.</span></span></p><p><span data-ttu-id="eb1ac-141">Если значение равно true, маркер безопасности отправляется дочернему процессу, прослушивающему порт `%ASPNETCORE_PORT%`, как заголовок MS-ASPNETCORE-WINAUTHTOKEN каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-141">If true, the token is forwarded to the child process listening on `%ASPNETCORE_PORT%` as a header 'MS-ASPNETCORE-WINAUTHTOKEN' per request.</span></span> <span data-ttu-id="eb1ac-142">Этот процесс вызывает CloseHandle по этому маркеру безопасности каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-142">It's the responsibility of that process to call CloseHandle on this token per request.</span></span></p> | `true` |
| `hostingModel` | <p><span data-ttu-id="eb1ac-143">Необязательный строковый атрибут.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-143">Optional string attribute.</span></span></p><p><span data-ttu-id="eb1ac-144">Указывает модель размещения — внутри процесса (`InProcess`/`inprocess`) или вне процесса (`OutOfProcess`/`outofprocess`).</span><span class="sxs-lookup"><span data-stu-id="eb1ac-144">Specifies the hosting model as in-process (`InProcess`/`inprocess`) or out-of-process (`OutOfProcess`/`outofprocess`).</span></span></p> | `InProcess`<br>`inprocess` |
| `processesPerApplication` | <p><span data-ttu-id="eb1ac-145">Необязательный целочисленный атрибут.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-145">Optional integer attribute.</span></span></p><p><span data-ttu-id="eb1ac-146">Указывает число экземпляров процесса, заданное в параметре `processPath`, которое может появиться для каждого приложения.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-146">Specifies the number of instances of the process specified in the `processPath` setting that can be spun up per app.</span></span></p><p><span data-ttu-id="eb1ac-147">&dagger;Для внутрипроцессного размещения существует ограничение: `1`.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-147">&dagger;For in-process hosting, the value is limited to `1`.</span></span></p><p><span data-ttu-id="eb1ac-148">Параметр `processesPerApplication` не рекомендуется.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-148">Setting `processesPerApplication` is discouraged.</span></span> <span data-ttu-id="eb1ac-149">Этот атрибут будет удален в будущем выпуске.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-149">This attribute will be removed in a future release.</span></span></p> | <span data-ttu-id="eb1ac-150">По умолчанию: `1`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-150">Default: `1`</span></span><br><span data-ttu-id="eb1ac-151">Минимум: `1`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-151">Min: `1`</span></span><br><span data-ttu-id="eb1ac-152">Максимум: `100`&dagger;</span><span class="sxs-lookup"><span data-stu-id="eb1ac-152">Max: `100`&dagger;</span></span> |
| `processPath` | <p><span data-ttu-id="eb1ac-153">Обязательный строковый атрибут.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-153">Required string attribute.</span></span></p><p><span data-ttu-id="eb1ac-154">Путь к исполняемому файлу, который запускает процесс прослушивания HTTP-запросов.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-154">Path to the executable that launches a process listening for HTTP requests.</span></span> <span data-ttu-id="eb1ac-155">Поддерживаются относительные пути.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-155">Relative paths are supported.</span></span> <span data-ttu-id="eb1ac-156">Если путь начинается с `.`, то начало пути считается относительно корневого каталога веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-156">If the path begins with `.`, the path is considered to be relative to the site root.</span></span></p> | |
| `rapidFailsPerMinute` | <p><span data-ttu-id="eb1ac-157">Необязательный целочисленный атрибут.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-157">Optional integer attribute.</span></span></p><p><span data-ttu-id="eb1ac-158">Указывает количество сбоев за минуту, которыми может завершиться процесс, указанный в `processPath`.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-158">Specifies the number of times the process specified in `processPath` is allowed to crash per minute.</span></span> <span data-ttu-id="eb1ac-159">Если этот предел превышен, модуль останавливает запуск процесса на оставшуюся часть минуты.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-159">If this limit is exceeded, the module stops launching the process for the remainder of the minute.</span></span></p><p><span data-ttu-id="eb1ac-160">Не поддерживается для внутрипроцессного размещения.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-160">Not supported with in-process hosting.</span></span></p> | <span data-ttu-id="eb1ac-161">По умолчанию: `10`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-161">Default: `10`</span></span><br><span data-ttu-id="eb1ac-162">Минимум: `0`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-162">Min: `0`</span></span><br><span data-ttu-id="eb1ac-163">Максимум: `100`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-163">Max: `100`</span></span> |
| `requestTimeout` | <p><span data-ttu-id="eb1ac-164">Необязательный атрибут timespan.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-164">Optional timespan attribute.</span></span></p><p><span data-ttu-id="eb1ac-165">Указывает продолжительность, на протяжении которой модуль ASP.NET Core ожидает ответа от процесса, прослушивающего порт %ASPNETCORE_PORT%.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-165">Specifies the duration for which the ASP.NET Core Module waits for a response from the process listening on %ASPNETCORE_PORT%.</span></span></p><p><span data-ttu-id="eb1ac-166">В версиях модуля ASP.NET Core, поставляемых с выпуском ASP.NET Core 2.1 или новее, атрибут `requestTimeout` указывается в часах, минутах и секундах.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-166">In versions of the ASP.NET Core Module that shipped with the release of ASP.NET Core 2.1 or later, the `requestTimeout` is specified in hours, minutes, and seconds.</span></span></p><p><span data-ttu-id="eb1ac-167">Не применяется к внутрипроцессному размещению.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-167">Doesn't apply to in-process hosting.</span></span> <span data-ttu-id="eb1ac-168">Для внутрипроцессного размещения модуль ожидает, пока приложение не обработает запрос.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-168">For in-process hosting, the module waits for the app to process the request.</span></span></p><p><span data-ttu-id="eb1ac-169">Допустимые значения для сегментов минут и секунд в строках находятся в диапазоне 0–59.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-169">Valid values for minutes and seconds segments of the string are in the range 0-59.</span></span> <span data-ttu-id="eb1ac-170">Значение `60` для минут и секунд приведет к ошибке *500 — внутренняя ошибка сервера*.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-170">Use of `60` in the value for minutes or seconds results in a *500 - Internal Server Error*.</span></span></p> | <span data-ttu-id="eb1ac-171">По умолчанию: `00:02:00`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-171">Default: `00:02:00`</span></span><br><span data-ttu-id="eb1ac-172">Минимум: `00:00:00`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-172">Min: `00:00:00`</span></span><br><span data-ttu-id="eb1ac-173">Максимум: `360:00:00`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-173">Max: `360:00:00`</span></span> |
| `shutdownTimeLimit` | <p><span data-ttu-id="eb1ac-174">Необязательный целочисленный атрибут.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-174">Optional integer attribute.</span></span></p><p><span data-ttu-id="eb1ac-175">Длительность ожидания модуля в секундах, пока произойдет правильное выключение исполняемого файла при обнаружении файла `app_offline.htm`.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-175">Duration in seconds that the module waits for the executable to gracefully shutdown when the `app_offline.htm` file is detected.</span></span></p> | <span data-ttu-id="eb1ac-176">По умолчанию: `10`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-176">Default: `10`</span></span><br><span data-ttu-id="eb1ac-177">Минимум: `0`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-177">Min: `0`</span></span><br><span data-ttu-id="eb1ac-178">Максимум: `600`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-178">Max: `600`</span></span> |
| `startupTimeLimit` | <p><span data-ttu-id="eb1ac-179">Необязательный целочисленный атрибут.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-179">Optional integer attribute.</span></span></p><p><span data-ttu-id="eb1ac-180">Время в секундах, которое модуль ожидает, пока запустится процесс прослушивания порта исполняемого файла.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-180">Duration in seconds that the module waits for the executable to start a process listening on the port.</span></span> <span data-ttu-id="eb1ac-181">Если этот предел превышен, модуль завершает процесс.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-181">If this time limit is exceeded, the module kills the process.</span></span></p><p><span data-ttu-id="eb1ac-182">*Внутрипроцессное* размещение. Процесс **не** перезапускается, и параметр `rapidFailsPerMinute` **не** используется.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-182">When hosting *in-process* : The process is **not** restarted and does **not** use the `rapidFailsPerMinute` setting.</span></span></p><p><span data-ttu-id="eb1ac-183">Размещение *вне процесса*. Модуль пытается перезапустить процесс при получении нового запроса и будет продолжать пытаться перезапустить процесс для последующих входящих запросов, если не удается запустить приложение определенное в атрибуте `rapidFailsPerMinute` количество раз за последнюю минуту.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-183">When hosting *out-of-process* : The module attempts to relaunch the process when it receives a new request and continues to attempt to restart the process on subsequent incoming requests unless the app fails to start `rapidFailsPerMinute` number of times in the last rolling minute.</span></span></p><p><span data-ttu-id="eb1ac-184">Значение 0 (ноль) **не** считается бесконечным временем ожидания.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-184">A value of 0 (zero) is **not** considered an infinite timeout.</span></span></p> | <span data-ttu-id="eb1ac-185">По умолчанию: `120`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-185">Default: `120`</span></span><br><span data-ttu-id="eb1ac-186">Минимум: `0`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-186">Min: `0`</span></span><br><span data-ttu-id="eb1ac-187">Максимум: `3600`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-187">Max: `3600`</span></span> |
| `stdoutLogEnabled` | <p><span data-ttu-id="eb1ac-188">Дополнительный логический атрибут.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-188">Optional Boolean attribute.</span></span></p><p><span data-ttu-id="eb1ac-189">Если значение равно true, `stdout` и `stderr` для процесса, указанного в атрибуте `processPath`, перенаправляются к файлу, заданному в атрибуте `stdoutLogFile`.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-189">If true, `stdout` and `stderr` for the process specified in `processPath` are redirected to the file specified in `stdoutLogFile`.</span></span></p> | `false` |
| `stdoutLogFile` | <p><span data-ttu-id="eb1ac-190">Необязательный строковый атрибут.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-190">Optional string attribute.</span></span></p><p><span data-ttu-id="eb1ac-191">Указывает относительный или абсолютный путь к файлу, для которого регистрируются `stdout` и `stderr` из процесса, указанного в `processPath`.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-191">Specifies the relative or absolute file path for which `stdout` and `stderr` from the process specified in `processPath` are logged.</span></span> <span data-ttu-id="eb1ac-192">Относительные пути задаются относительно корневого каталога веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-192">Relative paths are relative to the root of the site.</span></span> <span data-ttu-id="eb1ac-193">Любой путь, начинающийся с `.`, относится к корневому каталогу веб-сайта, а все остальные пути рассматриваются как абсолютные пути.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-193">Any path starting with `.` are relative to the site root and all other paths are treated as absolute paths.</span></span> <span data-ttu-id="eb1ac-194">Все папки, указанные в пути, создаются модулем при создании файла журнала.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-194">Any folders provided in the path are created by the module when the log file is created.</span></span> <span data-ttu-id="eb1ac-195">С помощью разделителей подчеркивания метка времени, идентификатор процесса и расширение файла ( `.log`) добавляются к последнему сегменту пути журнала `stdoutLogFile`.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-195">Using underscore delimiters, a timestamp, process ID, and file extension (`.log`) are added to the last segment of the `stdoutLogFile` path.</span></span> <span data-ttu-id="eb1ac-196">Если в качестве значения задано значение `.\logs\stdout`, например, журнал stdout сохраняется как `stdout_20180205194132_1934.log` в папке `logs` с датой 5 февраля 2018 г. в 19:41:32 с идентификатором процесса 1934.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-196">If `.\logs\stdout` is supplied as a value, an example stdout log is saved as `stdout_20180205194132_1934.log` in the `logs` folder when saved on 2/5/2018 at 19:41:32 with a process ID of 1934.</span></span></p> | `aspnetcore-stdout` |

### <a name="set-environment-variables"></a><span data-ttu-id="eb1ac-197">Настройка переменных среды</span><span class="sxs-lookup"><span data-stu-id="eb1ac-197">Set environment variables</span></span>

<span data-ttu-id="eb1ac-198">Переменные среды для процесса можно указать в атрибуте `processPath`.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-198">Environment variables can be specified for the process in the `processPath` attribute.</span></span> <span data-ttu-id="eb1ac-199">Укажите переменную среды с дочерним элементом `<environmentVariable>` элемента коллекции `<environmentVariables>`.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-199">Specify an environment variable with the `<environmentVariable>` child element of an `<environmentVariables>` collection element.</span></span> <span data-ttu-id="eb1ac-200">Переменные среды, установленные в этом разделе, имеют приоритет над переменными системной среды.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-200">Environment variables set in this section take precedence over system environment variables.</span></span>

<span data-ttu-id="eb1ac-201">В приведенном ниже примере устанавливаются две переменные среды в `web.config`.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-201">The following example sets two environment variables in `web.config`.</span></span> <span data-ttu-id="eb1ac-202">`ASPNETCORE_ENVIRONMENT` настраивает среду приложения для `Development`.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-202">`ASPNETCORE_ENVIRONMENT` configures the app's environment to `Development`.</span></span> <span data-ttu-id="eb1ac-203">Разработчик может временно задать это значение в файле `web.config`, чтобы принудительно загрузить [Страницу исключений для разработчиков](xref:fundamentals/error-handling) при отладке исключения приложения.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-203">A developer may temporarily set this value in the `web.config` file in order to force the [Developer Exception Page](xref:fundamentals/error-handling) to load when debugging an app exception.</span></span> <span data-ttu-id="eb1ac-204">`CONFIG_DIR` — пример пользовательской переменной среды, где разработчик написал код, который считывает значение при запуске, чтобы сформировать путь для загрузки файла конфигурации приложения.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-204">`CONFIG_DIR` is an example of a user-defined environment variable, where the developer has written code that reads the value on startup to form a path for loading the app's configuration file.</span></span>

```xml
<aspNetCore processPath="dotnet"
      arguments=".\MyApp.dll"
      stdoutLogEnabled="false"
      stdoutLogFile=".\logs\stdout"
      hostingModel="inprocess">
  <environmentVariables>
    <environmentVariable name="ASPNETCORE_ENVIRONMENT" value="Development" />
    <environmentVariable name="CONFIG_DIR" value="f:\application_config" />
  </environmentVariables>
</aspNetCore>
```

> [!NOTE]
> <span data-ttu-id="eb1ac-205">Вместо установки среды напрямую в `web.config` можно включить свойство `<EnvironmentName>` в [профиль публикации (`.pubxml`)](xref:host-and-deploy/visual-studio-publish-profiles) или файл проекта.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-205">An alternative to setting the environment directly in `web.config` is to include the `<EnvironmentName>` property in the [publish profile (`.pubxml`)](xref:host-and-deploy/visual-studio-publish-profiles) or project file.</span></span> <span data-ttu-id="eb1ac-206">При этом подходе во время публикации проекта среда задается в файле `web.config`:</span><span class="sxs-lookup"><span data-stu-id="eb1ac-206">This approach sets the environment in `web.config` when the project is published:</span></span>
>
> ```xml
> <PropertyGroup>
>   <EnvironmentName>Development</EnvironmentName>
> </PropertyGroup>
> ```

> [!WARNING]
> <span data-ttu-id="eb1ac-207">Установите только переменную среды `ASPNETCORE_ENVIRONMENT` для `Development` на серверах промежуточных процессов и тестирования, которые недоступны для ненадежных сетей, таких как Интернет.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-207">Only set the `ASPNETCORE_ENVIRONMENT` environment variable to `Development` on staging and testing servers that aren't accessible to untrusted networks, such as the Internet.</span></span>

## <a name="configuration-of-iis-with-webconfig"></a><span data-ttu-id="eb1ac-208">Настройка служб IIS с помощью `web.config`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-208">Configuration of IIS with `web.config`</span></span>

<span data-ttu-id="eb1ac-209">Конфигурация IIS зависит от `<system.webServer>` раздела `web.config` для сценариев IIS, предназначенных для работы приложений ASP.NET Core с помощью модуля ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-209">IIS configuration is influenced by the `<system.webServer>` section of `web.config` for IIS scenarios that are functional for ASP.NET Core apps with the ASP.NET Core Module.</span></span> <span data-ttu-id="eb1ac-210">Например, конфигурация IIS работает для динамического сжатия.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-210">For example, IIS configuration is functional for dynamic compression.</span></span> <span data-ttu-id="eb1ac-211">Если в службах IIS на уровне сервера настроено динамическое сжатие, элемент `<urlCompression>` в файле `web.config` приложения может отключить это сжатие для приложения ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-211">If IIS is configured at the server level to use dynamic compression, the `<urlCompression>` element in the app's `web.config` file can disable it for an ASP.NET Core app.</span></span>

<span data-ttu-id="eb1ac-212">Дополнительные сведения см. в следующих разделах:</span><span class="sxs-lookup"><span data-stu-id="eb1ac-212">For more information, see the following topics:</span></span>

* [<span data-ttu-id="eb1ac-213">Справочник по настройке для `<system.webServer>`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-213">Configuration reference for `<system.webServer>`</span></span>](/iis/configuration/system.webServer/)
* <xref:host-and-deploy/aspnet-core-module>
* <xref:host-and-deploy/iis/modules>

<span data-ttu-id="eb1ac-214">Сведения о настройке переменных среды для отдельных приложений, выполняющихся в изолированных пулах приложений (такая возможность поддерживается в службах IIS, начиная с версии 10.0), см. в разделе *Команда `AppCmd.exe`* статьи [Переменные среды `<environmentVariables>`](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) в справочной документации по службам IIS.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-214">To set environment variables for individual apps running in isolated app pools (supported for IIS 10.0 or later), see the *`AppCmd.exe` command* section of the [Environment Variables `<environmentVariables>`](/iis/configuration/system.applicationHost/applicationPools/add/environmentVariables/#appcmdexe) topic in the IIS reference documentation.</span></span>

## <a name="configuration-sections-of-webconfig"></a><span data-ttu-id="eb1ac-215">Разделы конфигурации `web.config`</span><span class="sxs-lookup"><span data-stu-id="eb1ac-215">Configuration sections of `web.config`</span></span>

<span data-ttu-id="eb1ac-216">Разделы конфигурации приложений ASP.NET 4.x в файле `web.config` не используются для конфигурации приложений ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-216">Configuration sections of ASP.NET 4.x apps in `web.config` aren't used by ASP.NET Core apps for configuration:</span></span>

* `<system.web>`
* `<appSettings>`
* `<connectionStrings>`
* `<location>`

<span data-ttu-id="eb1ac-217">Для настройки приложений ASP.NET Core используются другие поставщики конфигураций.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-217">ASP.NET Core apps are configured using other configuration providers.</span></span> <span data-ttu-id="eb1ac-218">Дополнительные сведения см. в разделе [Конфигурация](xref:fundamentals/configuration/index).</span><span class="sxs-lookup"><span data-stu-id="eb1ac-218">For more information, see [Configuration](xref:fundamentals/configuration/index).</span></span>

## <a name="transform-webconfig"></a><span data-ttu-id="eb1ac-219">Преобразование web.config</span><span class="sxs-lookup"><span data-stu-id="eb1ac-219">Transform web.config</span></span>

<span data-ttu-id="eb1ac-220">Если вам необходимо преобразовать `web.config` при публикации, обратитесь к разделу <xref:host-and-deploy/iis/transform-webconfig>.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-220">If you need to transform `web.config` on publish, see <xref:host-and-deploy/iis/transform-webconfig>.</span></span> <span data-ttu-id="eb1ac-221">Вам может потребоваться преобразовать `web.config` при публикации, чтобы задать переменные среды на основе конфигурации, профиля или среды.</span><span class="sxs-lookup"><span data-stu-id="eb1ac-221">You might need to transform `web.config` on publish to set environment variables based on the configuration, profile, or environment.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="eb1ac-222">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="eb1ac-222">Additional resources</span></span>

* [<span data-ttu-id="eb1ac-223">Службы IIS\<system.webServer></span><span class="sxs-lookup"><span data-stu-id="eb1ac-223">IIS \<system.webServer></span></span>](/iis/configuration/system.webServer/)
* <xref:host-and-deploy/iis/modules>
* <xref:host-and-deploy/iis/transform-webconfig>
